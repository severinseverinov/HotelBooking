import{W as F,a4 as y,a5 as v,j as l,d as e,B as f,F as C,q as P}from"./index-5b5dd1dc.js";import{u as x}from"./index.esm-924f81ee.js";import{F as N,a as r,I as n}from"./FormRow-3f426176.js";import{S as T}from"./SpinnerMini-207b3d18.js";function j(){const{mutate:d,isPending:a}=F({mutationFn:y,onSuccess:i=>{v.success("Account successfully created! Please verufy the new account from the user's email address.")}});return{signup:d,isPending:a}}function B(){var o,m,c,p;const{signup:d,isPending:a}=j(),{register:i,formState:h,getValues:g,handleSubmit:w,reset:u}=x(),{errors:s}=h;function S({fullName:t,email:b,password:q}){d({fullName:t,email:b,password:q},{onSettled:()=>u()})}return l(N,{onSubmit:w(S),children:[e(r,{label:"Full name",error:(o=s==null?void 0:s.fullName)==null?void 0:o.message,children:e(n,{type:"text",id:"fullName",disabled:a,...i("fullName",{required:"This field is required"})})}),e(r,{label:"Email address",error:(m=s==null?void 0:s.email)==null?void 0:m.message,children:e(n,{type:"email",id:"email",disabled:a,...i("email",{required:"This field is required",pattern:{value:/\S+@\S+\.\S+/,message:"Please provide a valid email address"}})})}),e(r,{label:"Password (min 8 characters)",error:(c=s==null?void 0:s.password)==null?void 0:c.message,children:e(n,{type:"password",id:"password",disabled:a,...i("password",{required:"This field is required",minLength:{value:8,message:"Password needs a minimum of 8 characters"}})})}),e(r,{label:"Repeat password",error:(p=s==null?void 0:s.passwordConfirm)==null?void 0:p.message,children:e(n,{type:"password",id:"passwordConfirm",disabled:a,...i("passwordConfirm",{required:"This field is required",validate:t=>t===g().password||"Passwords need to match"})})}),l(r,{children:[e(f,{variation:"secondary",type:"reset",disabled:a,onClick:u,children:"Cancel"}),e(f,{children:a?e(T,{}):"Create new user"})]})]})}function A(){return l(C,{children:[e(P,{as:"h1",children:"Create a new user"}),e(B,{})]})}export{A as default};
